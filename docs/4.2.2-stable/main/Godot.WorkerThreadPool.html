<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class WorkerThreadPool | Godot4 C# API </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class WorkerThreadPool | Godot4 C# API ">
      
      <meta name="description" content="The  singleton allocates a set of s (called worker threads) on project startup and provides methods for offloading tasks to them. This can be used for simple multithreading without having to create s. Tasks hold the  to be run by the threads.  can be used to create regular tasks, which will be taken by one worker thread, or group tasks, which can be distributed between multiple worker threads. Group tasks execute the  multiple times, which makes them useful for iterating over a lot of elements, such as the enemies in an arena. Here&#39;s a sample on how to offload an expensive function to worker threads:    private List&amp;lt;Node&amp;gt; _enemies = new List&amp;lt;Node&amp;gt;(); // A list to be filled with enemies. private void ProcessEnemyAI(int enemyIndex) { Node processedEnemy = _enemies[enemyIndex]; // Expensive logic here. } public override void _Process(double delta) { long taskId = WorkerThreadPool.AddGroupTask(Callable.From&amp;lt;int&amp;gt;(ProcessEnemyAI), _enemies.Count); // Other code... WorkerThreadPool.WaitForGroupTaskCompletion(taskId); // Other code that depends on the enemy AI already being processed. }  The above code relies on the number of elements in the enemies array remaining constant during the multithreaded part.    Note: Using this singleton could affect performance negatively if the task being distributed between threads is not computationally expensive.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Godot.WorkerThreadPool">



  <h1 id="Godot_WorkerThreadPool" data-uid="Godot.WorkerThreadPool" class="text-break">
Class WorkerThreadPool  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="../editor/Godot.html">Godot</a></dd></dl>
  <dl><dt>Assembly</dt><dd>GodotSharp.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>The <a class="xref" href="Godot.WorkerThreadPool.html">WorkerThreadPool</a> singleton allocates a set of <a class="xref" href="Godot.GodotThread.html">GodotThread</a>s (called worker threads) on project startup and provides methods for offloading tasks to them. This can be used for simple multithreading without having to create <a class="xref" href="Godot.GodotThread.html">GodotThread</a>s.</p>
<p>Tasks hold the <a class="xref" href="Godot.Callable.html">Callable</a> to be run by the threads. <a class="xref" href="Godot.WorkerThreadPool.html">WorkerThreadPool</a> can be used to create regular tasks, which will be taken by one worker thread, or group tasks, which can be distributed between multiple worker threads. Group tasks execute the <a class="xref" href="Godot.Callable.html">Callable</a> multiple times, which makes them useful for iterating over a lot of elements, such as the enemies in an arena.</p>
<p>Here's a sample on how to offload an expensive function to worker threads:</p>
<p>
  <pre><code class="lang-csharp">private List&lt;Node&gt; _enemies = new List&lt;Node&gt;(); // A list to be filled with enemies.
<p>private void ProcessEnemyAI(int enemyIndex)
{
Node processedEnemy = _enemies[enemyIndex];
// Expensive logic here.
}</p>
<p>public override void _Process(double delta)
{
long taskId = WorkerThreadPool.AddGroupTask(Callable.From&lt;int&gt;(ProcessEnemyAI), _enemies.Count);
// Other code...
WorkerThreadPool.WaitForGroupTaskCompletion(taskId);
// Other code that depends on the enemy AI already being processed.
}</p></code></pre>

<p>The above code relies on the number of elements in the <code>enemies</code> array remaining constant during the multithreaded part.</p>
<p>
  <b>Note:</b> Using this singleton could affect performance negatively if the task being distributed between threads is not computationally expensive.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static class WorkerThreadPool</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">WorkerThreadPool</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="properties">Properties
</h2>


  <a id="Godot_WorkerThreadPool_Singleton_" data-uid="Godot.WorkerThreadPool.Singleton*"></a>

  <h3 id="Godot_WorkerThreadPool_Singleton" data-uid="Godot.WorkerThreadPool.Singleton">
  Singleton
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static WorkerThreadPoolInstance Singleton { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Godot.WorkerThreadPoolInstance.html">WorkerThreadPoolInstance</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="Godot_WorkerThreadPool_AddGroupTask_" data-uid="Godot.WorkerThreadPool.AddGroupTask*"></a>

  <h3 id="Godot_WorkerThreadPool_AddGroupTask_Godot_Callable_System_Int32_System_Int32_System_Boolean_System_String_" data-uid="Godot.WorkerThreadPool.AddGroupTask(Godot.Callable,System.Int32,System.Int32,System.Boolean,System.String)">
  AddGroupTask(Callable, int, int, bool, string)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Adds <code class="paramref">action</code> as a group task to be executed by the worker threads. The <a class="xref" href="Godot.Callable.html">Callable</a> will be called a number of times based on <code class="paramref">elements</code>, with the first thread calling it with the value <code>0</code> as a parameter, and each consecutive execution incrementing this value by 1 until it reaches <code>element - 1</code>.</p>
<p>The number of threads the task is distributed to is defined by <code class="paramref">tasksNeeded</code>, where the default value <code>-1</code> means it is distributed to all worker threads. <code class="paramref">highPriority</code> determines if the task has a high priority or a low priority (default). You can optionally provide a <code class="paramref">description</code> to help with debugging.</p>
<p>Returns a group task ID that can be used by other methods.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static long AddGroupTask(Callable action, int elements, int tasksNeeded = -1, bool highPriority = false, string description = &quot;&quot;)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>action</code> <a class="xref" href="Godot.Callable.html">Callable</a></dt>
    <dd></dd>
    <dt><code>elements</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
    <dt><code>tasksNeeded</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
    <dt><code>highPriority</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
    <dt><code>description</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>











  <a id="Godot_WorkerThreadPool_AddTask_" data-uid="Godot.WorkerThreadPool.AddTask*"></a>

  <h3 id="Godot_WorkerThreadPool_AddTask_Godot_Callable_System_Boolean_System_String_" data-uid="Godot.WorkerThreadPool.AddTask(Godot.Callable,System.Boolean,System.String)">
  AddTask(Callable, bool, string)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Adds <code class="paramref">action</code> as a task to be executed by a worker thread. <code class="paramref">highPriority</code> determines if the task has a high priority or a low priority (default). You can optionally provide a <code class="paramref">description</code> to help with debugging.</p>
<p>Returns a task ID that can be used by other methods.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static long AddTask(Callable action, bool highPriority = false, string description = &quot;&quot;)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>action</code> <a class="xref" href="Godot.Callable.html">Callable</a></dt>
    <dd></dd>
    <dt><code>highPriority</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
    <dt><code>description</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>











  <a id="Godot_WorkerThreadPool_GetGroupProcessedElementCount_" data-uid="Godot.WorkerThreadPool.GetGroupProcessedElementCount*"></a>

  <h3 id="Godot_WorkerThreadPool_GetGroupProcessedElementCount_System_Int64_" data-uid="Godot.WorkerThreadPool.GetGroupProcessedElementCount(System.Int64)">
  GetGroupProcessedElementCount(long)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns how many times the <a class="xref" href="Godot.Callable.html">Callable</a> of the group task with the given ID has already been executed by the worker threads.</p>
<p>
  <b>Note:</b> If a thread has started executing the <a class="xref" href="Godot.Callable.html">Callable</a> but is yet to finish, it won't be counted.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static uint GetGroupProcessedElementCount(long groupId)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>groupId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.uint32">uint</a></dt>
    <dd></dd>
  </dl>











  <a id="Godot_WorkerThreadPool_IsGroupTaskCompleted_" data-uid="Godot.WorkerThreadPool.IsGroupTaskCompleted*"></a>

  <h3 id="Godot_WorkerThreadPool_IsGroupTaskCompleted_System_Int64_" data-uid="Godot.WorkerThreadPool.IsGroupTaskCompleted(System.Int64)">
  IsGroupTaskCompleted(long)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns <code>true</code> if the group task with the given ID is completed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static bool IsGroupTaskCompleted(long groupId)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>groupId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>











  <a id="Godot_WorkerThreadPool_IsTaskCompleted_" data-uid="Godot.WorkerThreadPool.IsTaskCompleted*"></a>

  <h3 id="Godot_WorkerThreadPool_IsTaskCompleted_System_Int64_" data-uid="Godot.WorkerThreadPool.IsTaskCompleted(System.Int64)">
  IsTaskCompleted(long)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns <code>true</code> if the task with the given ID is completed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static bool IsTaskCompleted(long taskId)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>taskId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>











  <a id="Godot_WorkerThreadPool_WaitForGroupTaskCompletion_" data-uid="Godot.WorkerThreadPool.WaitForGroupTaskCompletion*"></a>

  <h3 id="Godot_WorkerThreadPool_WaitForGroupTaskCompletion_System_Int64_" data-uid="Godot.WorkerThreadPool.WaitForGroupTaskCompletion(System.Int64)">
  WaitForGroupTaskCompletion(long)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Pauses the thread that calls this method until the group task with the given ID is completed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void WaitForGroupTaskCompletion(long groupId)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>groupId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>












  <a id="Godot_WorkerThreadPool_WaitForTaskCompletion_" data-uid="Godot.WorkerThreadPool.WaitForTaskCompletion*"></a>

  <h3 id="Godot_WorkerThreadPool_WaitForTaskCompletion_System_Int64_" data-uid="Godot.WorkerThreadPool.WaitForTaskCompletion(System.Int64)">
  WaitForTaskCompletion(long)
  <a class="header-action link-secondary" title="View source" href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Pauses the thread that calls this method until the task with the given ID is completed.</p>
<p>Returns <a class="xref" href="Godot.Error.html#Godot_Error_Ok">Ok</a> if the task could be successfully awaited.</p>
<p>Returns <a class="xref" href="Godot.Error.html#Godot_Error_InvalidParameter">InvalidParameter</a> if a task with the passed ID does not exist (maybe because it was already awaited and disposed of).</p>
<p>Returns <a class="xref" href="Godot.Error.html#Godot_Error_Busy">Busy</a> if the call is made from another running task and, due to task scheduling, the task to await is at a lower level in the call stack and therefore can't progress. This is an advanced situation that should only matter when some tasks depend on others.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Error WaitForTaskCompletion(long taskId)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>taskId</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Godot.Error.html">Error</a></dt>
    <dd></dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/godotengine/godot/blob/15073afe3856abd2aa1622492fe50026c7d63dc1/modules/mono/glue/GodotSharp/GodotSharp/Generated/GodotObjects/WorkerThreadPool.cs" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Godot Documentation
        </div>
      </div>
    </footer>
  </body>
</html>
